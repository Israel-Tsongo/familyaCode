
<!DOCTYPE html>
<html  xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">

<!--  Entete -->
<head th:replace="fragments :: html_head"></head>


    <body id="page-top">
         <div id="wrapper">
              <nav th:replace="fragments :: left_nav">
             </nav>  
              <div class="d-flex flex-column" id="content-wrapper">
                    <div id="content">
                          <nav th:replace="fragments :: centered_nav">
                          </nav>
                          <div class="container-fluid" id="mainDashID" th:fragment="mainDash">
		                          <div class="d-sm-flex justify-content-between align-items-center mb-4">
		                              <h3 class="text-dark mb-0">Dashboard</h3>
		                         </div>
		                          <div class="row">
						                <div class="col-md-4 col-xl-4 col-lg-4 mb-4">
						                    <div class="card shadow border-left-primary py-2" >
						                        <div class="card-body">
						                            <div class="row align-items-center no-gutters">
						                                <div class="col mr-2">
						                                    <div class="text-uppercase text-primary font-weight-bold text-xs mb-1"><span style="font-size: 25px;">Capital Initial</span></div>
						                                    <div class="text-dark font-weight-bold h5 mb-0"><span>[[${capitatInitial+" $"}]]</span></div>
						                                </div>
						                                <div class="col-auto"><i class="fas fa-dollar-sign fa-2x text-gray-300"></i></div>
						                            </div>
						                        </div>
						                    </div>
						                 
						                </div>
						                <div class="col-md-4 col-xl-4 col-lg-4 mb-4">
						                    <div class="card shadow border-left-danger py-2" >
						                        <div class="card-body">
						                            <div class="row align-items-center no-gutters">
						                                <div class="col mr-2">
						                                    <div class="text-uppercase text-primary font-weight-bold text-xs mb-1"><span style="font-size: 25px; color:rgba(200,90,90,0.6)">Total contribution</span></div>
						                                    <div class="text-dark font-weight-bold h5 mb-0"><span>[[${totalContribution+" $"}]]</span></div>
						                                </div>
						                                <div class="col-auto"><i class="fas fa-dollar-sign fa-2x text-gray-300"></i></div>
						                            </div>
						                        </div>
						                    </div>
						                 
						                </div>
						                <div class="col-md-4 col-xl-4 col-lg-4 mb-4">
						                    <div class="card shadow border-left-success py-2">
						                        <div class="card-body">
						                            <div class="row align-items-center no-gutters">
						                                <div class="col mr-2">
						                                    <div class="text-uppercase text-success font-weight-bold text-xs mb-1" style="font-size: 25px;"><span>Interet general</span></div>
						                                    <div class="text-dark font-weight-bold h5 mb-0"><span>[[${totalInteret+" $"}]]</span></div>
						                                </div>
						                                <div class="col-auto"><i class="fas fa-dollar-sign fa-2x text-gray-300"></i></div>
						                            </div>
						                        </div>
						                    </div>
						                 </div>
						          </div>
						          <div class="row justify-content-center">
						                <div class="col-md-4 col-xl-4 col-lg-4 mb-4 ">
						                    <div class="card shadow border-left-info py-2">
						                        <div class="card-body">
						                            <div class="row align-items-center no-gutters">
						                                <div class="col mr-2">
						                                    <div class="text-uppercase text-primary font-weight-bold text-xs mb-1"><span style="font-size: 25px;color:teal">Total En Caisse</span></div>
						                                    <div class="text-dark font-weight-bold h5 mb-0"><span>[[${totalEnCaisse+" $"}]]</span></div>
						                                </div>
						                                <div class="col-auto"><i class="fas fa-dollar-sign fa-2x text-gray-300"></i></div>
						                            </div>
						                        </div>
						                    </div>
						                 
						                </div>
						              
						             </div>
				                  
				                
				                  <div class="row">
				                <div class="col-md-4 col-xl-4 col-lg-4 mb-4">
				                    <div class="card shadow border-left-info py-2">
				                        <div class="card-body">
				                            <div class="row align-items-center no-gutters">
				                                <div class="col mr-2">
				                                    <div class="text-uppercase text-primary font-weight-bold text-xs mb-1"><span style="color:rgba(100,200,100,0.6);font-size: 23px;">Depense</span></div>
				                                    <div class="text-dark font-weight-bold h5 mb-0"><span>[[${totalDepense +" $"}]] </span></div>
				                                </div>
				                                <div class="col-auto"><i class="fa fa-dollar fa-2x text-gray-300"></i></div>
				                            </div>
				                        </div>
				                    </div>
				                </div>
				                <div class="col-md-4 col-xl-4 col-lg-4 mb-4">
				                    <div class="card shadow border-left-info py-2">
				                        <div class="card-body">
				                            <div class="row align-items-center no-gutters">
				                                <div class="col mr-2">
				                                    <div class="text-uppercase text-primary font-weight-bold text-xs mb-1"><span style="color: rgb(54,185,204);font-size: 23px;"> Dette</span></div>
				                                    <div class="text-dark font-weight-bold h5 mb-0"><span>[[${totalDette +" $"}]]</span></div>
				                                </div>
				                                <div class="col-auto"><i class="fa fa-dollar fa-2x text-gray-300"></i></div>
				                            </div>
				                        </div>
				                    </div>
				                </div>
				                <div class="col-md-4 col-xl-4 col-lg-4 mb-4">
				                    <div class="card shadow border-left-warning py-2">
				                        <div class="card-body">
				                            <div class="row align-items-center no-gutters">
				                                <div class="col mr-2">
				                                    <div class="text-uppercase text-warning font-weight-bold text-xs mb-1"><span style="font-size: 25px;">Interet net</span></div>
				                                    <div class="text-dark font-weight-bold h5 mb-0"><span>[[${interetNet+" $"}]]</span></div>
				                                </div>
				                                <div class="col-auto"><i class="fas fa-dollar-sign fa-2x text-gray-300"></i></div>
				                            </div>
				                        </div>
				                    </div>
				                </div>               
                
                             </div>
                              <div class="row justify-content-center align-items-center">
			                     <div class="col-md-4 col-xl-4 col-lg-4 mb-4">
			                      
			                                <div class="col mr-2">
			                                    
			                                    <div class="text-uppercase text-center text-primary font-weight-bold text-xs mb-1" style="margin-top:20px;">
			                                    	<span  >
			                                    	   <button  class="btn btn-primary" data-toggle="modal" data-target="#finFiscalModal" style="font-weight:bold;width:230px;border:3px solid; height:55px; border-radius:5px; box-shadow:3px 3px 10px blue" >Fin de l'annee fiscal</button>
			                                    	</span>
			                                    </div>
			                                    
			                                </div>			                             
			                       </div>  
			                  </div>
			              
			              
			              <script th:inline="javascript">
			                
			                
				                   var pag=(function error(){ var p=[[${errorList}]]; return p ; }());			                		   
				                 
				                   var errorList=(function errors(){ var error=[[${errorList}]];  return error; }());	   

			                  
			              </script>
			              
                 
                          </div>
		                  
                     </div>
                     <footer class="bg-white sticky-footer">      
						        <div class="container my-auto">
						            <div class="text-center my-auto copyright"><span>Copyright © El manar 2021</span></div>
						        </div>
		             </footer>
               </div>
        </div>
   
       <div   class="modal fade"  id="finFiscalModal" role="dialog" tabindex="-1">
    			<div id="modal-id" style="max-width:580px;" class="modal-dialog" role="document">
       				<div class="modal-content">
           				<div class="modal-header">
               				<h4 class="modal-title"> </h4>
               			</div>
            			<div class="modal-body">                
               
    							<div class="card"   id="card-id" style="height: auto;">
       								<div class="card-body" id="main-card-body">
            								<div id="div-after-card-body">
               									<div class="newsletter-subscribe">
													 <div class="container">
													        <div class="intro">
													            <h2 class="text-center">Button de fin de l'annee fiscale</h2>
													            <p class="text-center">En en appuyant sur ce button les operation suivante seront executees : partage des interets entre les membres,debut d'une nouvelle annee fiscale </p>
													        </div>
														     <form class="form-inline d-flex justify-content-center">
														            <div class="form-group">
														            	<input type="password" id="passwordId" class="form-control"  placeholder="Entrer votre mot de passe" />
														            </div>
														            <div class="form-group" style="margin-left:15px">
														            	<button id="setFin" class="btn btn-primary" data-dismiss="modal"> Enregistrer </button>
														            </div>
														      </form>
													 </div>
												 </div>                																   
                                             </div>
                                      </div>
                                  </div>
                         </div>
            
                          <div class="modal-footer" style="height: 57px;">
				                <button data-dismiss="modal" class="btn btn-primary" type="button" style="margin-top: -3px;width: 101px;border-radius: 5px;">Annuler</button>
				          </div>
                    </div>
               </div>
       </div>
    
   
    
    
    
    
    

    <script src="assets/js/jquery.min.js?h=89312d34339dcd686309fe284b3f226f"></script>
    <script src="assets/bootstrap/js/bootstrap.min.js?h=0168f7c1e0d08faa2f4b13f4a1dc8c98"></script>   
    <script src="assets/js/script.min.js?h=9b20e2f15b170d8c8330230170292640"></script>
    
    <script  th:inline="javascript" >
    
    
    
    function errorFonction() {
        if(typeof errorList !='undefined' && errorList.length>0 && errorList != null ){
     		var messages="";
     		console.log("===>",errorList);
     		errorList.forEach((item,index)=>{messages+=item+"\n"; })
     		
     		alert(messages);
     		
        	}	
        
       }
       	
 $(document).ready(function(){ 
       	 
       		//console.log(" Up Ajax Add Method");
        		
       	        $("#setFin").unbind("click").click( function() {
       	        	
       	        	$.ajax({
        				 url:"http://localhost:8080/setPost",
        				 type:"post",
        				 data:{
        					 btnEnd:true,
        					 password: $("#passwordId").val(),         	    	    	
        					 
        				      },
        		 
        		        success: function(data){
        		        	 
        		        	$("#finFiscalModal").modal("hide");
        		        	$("#mainDashID").html(data);
        		        	
        		        	errorFonction()
        		        	console.log("Success",errorList);
 	                    	
        		          },       
        		                      
        		          error: function(error){
        		        	  console.log(" errror",errorList);
        		        	  errorFonction()
        		        	  alert("Echec");
        		        	  
        		                     }
        		        } );
        		       
       		            
        		});
         	});
       	
    
    </script>

</body>