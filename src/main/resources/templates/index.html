<!DOCTYPE html>
<html  xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">

<!--  Entete -->
<head th:replace="fragments :: html_head"></head>


		<body id="page-top">

					    <div id="wrapper">           
					                
							        <nav th:replace="fragments :: left_nav">
							         </nav>          
							        <div class="d-flex flex-column" id="content-wrapper">
									              <div id="content">
									            
									                     <nav th:replace="fragments :: centered_nav">
									                     </nav> 
									               
									            <div class="container-fluid" id="containerMain" th:fragment="mainContainer" >
									                <div class="d-sm-flex justify-content-between align-items-center mb-4">
									                    <h3 class="text-dark mb-0" id="membre-title">Tout les Membres</h3>
									                </div>
									                <script th:inline="javascript">                
                
											                   var pag=(function pages(){ var p=[[${pages}]]; return p ;}());											                
											                   var errorList=(function errors(){ var error=[[${errorList}]];  return error; }());
											                   
															    $(document).ready(function(){
																	  $("#pageSize").val([[${currentSize}]]);			                    
																  })
									                  
									                </script>
									                
									                <!-- Table membre-->
									                <p > [[${isToUpdate}]]</p>
									                <div class="row">                 
									                    <div class="col">
									                        <div class="card shadow mb-12" id="card-center">
									                            <div class="card-header d-flex justify-content-between align-items-center">
									                                <h6 class="text-primary font-weight-bold m-0">Liste des&nbsp; Membres</h6>
									                                <div class="dropdown no-arrow">
										                                <button class="btn btn-link btn-sm dropdown-toggle" data-toggle="dropdown" aria-expanded="false" type="button">
										                                	<i class="fas fa-ellipsis-v text-gray-400"></i>
										                                </button>
									                                    <div class="dropdown-menu shadow dropdown-menu-right animated--fade-in">
									                                        <p class="text-center dropdown-header">dropdown header:</p>
									                                        <a class="dropdown-item" style="cursor:pointer;font-size:17px" id="exportInPdf" onclick="actions(exportInPdf)">Exporter en PDF </a>
									                                       <!-- <a class="dropdown-item" href="#">&nbsp;Une autre action</a>
									                                        <div class="dropdown-divider"></div>
									                                        <a class="dropdown-item" href="#">Quelque chose d'autre ?</a>-->
									                                     </div>
									                                </div>
									                            </div>
									                            
									                            <div class="jumbotron jumbot" style="height: -100px;padding: 3px;"  ></div>
									                            <div class="card-body" id="card-member" style="margin: 0px;padding: 10px;">
									                                <div class="row" id="search-row">
									                                
									                                    <div class="col-md-4 text-nowrap">
									                                        <div id="dataTable_length" class="dataTables_length" aria-controls="dataTable">
									                                        <label>Show&nbsp;<select class="form-control form-control-sm custom-select custom-select-sm" id="pageSize" th:onclick="javascript:pageSize()">
										                                        <option th:value="5" selected>5</option>
										                                        <option th:value="10">10</option>
										                                        <option th:value="15">15</option>
										                                        <option th:value="20">20</option>
									                                        </select>&nbsp;</label></div>
									                                    </div>
									                                    <div class="col-md-4 text-nowrap">
									                                         <button id="detail-button"   onclick ="detailDuMembre()" class="btn btn-primary col " style="height:32px;width: 250px;margin-left:7px;font-style:italique;padding:0px;font-weight:bold" >Detail d'un Membre</button>                                        
									                                    </div>
									                                    <div class="col-md-4">
									                                        <div class="text-md-right dataTables_filter form-group row" id="dataTable_filter"  style="height:35px;width: 300px; position:absolute;right:5%">
									                                              <input  type="text" id="keyWord"  name="keyWord" th:value="${keyWord}" class="form-control form-control-sm col" aria-controls="dataTable" placeholder="Search  name">
									                                              <button id=searcher onclick ="searcher()" class="btn btn-primary col " style="height:32px;width: 120px;margin-left:7px;font-style:italique;padding:0px;font-weight:bold" >Chercher</button>                                        
									                                        
									                                        </div>
									                                    </div>
									                                </div>
									                                
									                                <div class="table-responsive" id="table-member">
									                                   
									                                    <table class="table  fixed-header" th:fragment="table-member">
									                                        
									                                        <thead>
									                                           
									                                            <tr id="tab-header">
									                                                <th style="width: 0px;padding: 0px;padding-top: 0px;font-size: 0px;height: 10px;"></th>
									                                                <th>Nom</th>
									                                                <th>Matricule</th>
									                                                <th>Mandataire</th>
									                                                <th>Capital</th>
									                                                <th>Categorie</th>									                                                
									                                                <th>Fonction</th>
									                                                <th>Type de contrat</th>
									                                                <th>Date d'adhesion</th>
									                                            </tr>
									                                        </thead>
									                                        <tbody >
									                                            
									                                            <tr th:each="element:${lst}">
									                                                 
									                                               <td class="text-center" style="width: 36.8px;padding: 12px;font-size: 16px;border-width: 2px;">                                                 
									                                                    <input th:value="${element.get(0)}"  th:onclick="javascript:isChecked([[${element.get(0)}]],[[${lst}]]);" class="idMember" type="radio" name="chk" style="margin-top: 0px;">                                                                                                  
									                                             </td>
									                                                <td th:text="${element.get(1)}" ></td>
									                                                <td th:text="${element.get(2)}"></td>
									                                                <td th:text="${element.get(3)}"></td>
									                                                <td th:text="${element.get(4)+' $'}"></td>
									                                                <td th:text="${element.get(5)}"></td>
									                                                <td th:text="${element.get(6) }"></td>
									                                                <td th:text="${element.get(7) }"></td>
									                                                <td th:text="${element.get(8)}"></td>  
									                                            </tr>                                          
									                                        </tbody>
									                                    </table>
									                                </div>
									                                <div class="jumbotron jumbot"></div>
									                            </div>
									                        </div>
									                        
									                         
									                            <div    id="card-center-1" class="card shadow mb-12">
									                            <div id="div-total">
									                                <div class="d-inline" id="total-content" style="width:320px">
									                                    <p class="d-inline" id="title-total">TOTAL :&nbsp;</p><button class="btn btn-primary" id="button-total" type="button" style="padding-bottom: 0px;padding-top: 0px;padding-right: 0px;padding-left: 0px;" th:text="${totalCapitaux+' $'}"> </button></div>
									                            </div>
									                            <div class="card-body" id="card-bottom-body">
									                                <div class="row">
									                                    <div class="col-md-2 align-self-center">
									                                        <p id="dataTable_info" class="dataTables_info" role="status" aria-live="polite">Showing 1 to [[${currentSize}]] of </p>
									                                    </div>
									                                    
									                                    <div class="col-md-10">
									                                        <nav th:replace="fragments :: safePagination" >
                                    
       								   										</nav>
									                                    </div>
									                                </div>
									                            </div>
									                        </div>
									                        <!-- Pagination -->
									                   
									                    </div>
									                    
									                </div>
									                
									            </div>
									            
															            
														
									        </div>
									                <!-- Footer -->
									              <footer th:replace="fragments :: html_footer">       
									              </footer>
							   	   </div>        

						</div>
                          <div id="floating-button" class="btn-group-fab"  role="group" aria-label="FAB Menu" >
									<div>
										<button type="button" id="menu" class="btn btn-main btn-primary has-tooltip" data-placement="left" title="Menu"><i class="fa fa-bars"></i></button>
								
										<button type="button"   id="addBtn" th:onclick="javascript:setVariableAdd([[${pages}]]);" data-toggle="modal"  data-target="#addModal" class="btn btn-sub btn-info has-tooltip" data-placement="left" title="Ajouter"><i class="fa fa-plus"></i></button>
										<button  type="button" id="updateBtn"  onclick="setVariableUpdate(idValue)" data-toggle="modal" data-target="#addModal" class="btn btn-sub btn-danger has-tooltip" data-placement="left" title="Metre a jour"><i class="fa fa-refresh"></i></button>
								
										<button type="button" id="deleteBtn"  onclick="setVariableDelete()" class="btn btn-sub btn-warning has-tooltip" data-placement="left" title="Supprimer"><i class="fa fa-remove"></i></button>
									</div>
							</div>
							
							<!--  --> 
							
							
							<div role="dialog" tabindex="-1" class="modal fade justify-content-center" id="detailModal"   style="max-width: 600px;position:absolute;left:30%;top:10%;transform:translate(-50,-50)" >
				                     <div class="modal-dialog" role="document">
				                 <div class="modal-content" id ="detailModalContent" th:fragment="detailModalContent"> 
				            <div class="modal-header d-flex justify-content-center">
				                <h4 class="modal-title text-center" style="font-family:cursive">Details du Membre</h4>
				            </div>
				            <div class="modal-body" style="width: 498px;height: 430px;">
				                <div class="card" style="width: 470px; border-radius: 72px;">
				                    <div class="card-body" style="height: 410px;width: 470px;border-radius: 70px;border: 0.9px solid rgb(125,165,205) ;">
				                        <div class="box">
				                            <div class="d-flex justify-content-center align-items-center" style="text-align: center;height: 150px;">
				                                <div class="d-flex justify-content-center" style="width: 124px;height: 115px;"><img class="rounded-circle img-fluid" th:src="@{/assets/img/1.png}" style="width: 117px;height: 113px;box-shadow: 2px 2px 6px rgb(51,108,166);" /></div>
				                            </div>
				                            <h3 class="name" style="text-align: center;font-size: 26px;color: rgb(16,125,234);"  th:text="${nom}" > </h3>
				                            <p class="title" style="text-align: center;font-size: 15px;font-weight: 600;font-family:century Gothic"><span>Matricule :</span><span th:text="${matricule}" > 49389</span></p>
				                            <div class="d-flex justify-content-center" >
				                                <div class="d-flex justify-content-center align-items-center" style="font-style: italic;opacity: 1;height: 150px;width: 322px;">
				                                    <div style="width: 300px;height: 140px;font-size: 18px;box-shadow: 1px 1px 5px 2px rgb(162,185,208);border-radius: 15px;background: #e5e6ea;color: rgb(4,5,6);font-family:century Gothic;font-weight:bold">
				                                        <div class="row" style="width: 300px;margin: 0px;">
				                                            <div class="col" style="width: 197px;"><span style="color: rgb(5,130,255);">Capital :</span></div>
				                                            <div class="col" style="width: 186px;padding: 0px;"><span class="shadowClass" style="text-shadow: 1px 1px 3px  rgb(8,126,244);" th:text="${capital+' $'}">1200 $</span></div>
				                                        </div>
				                                        <div class="row" style="width: 300px;margin: 0px;">
				                                            <div class="col"><span style="color: rgb(5,125,244);">Contributions :</span></div>
				                                            <div class="col" style="padding: 0px;"><span style="text-shadow: 1px 1px 3px  rgb(8,126,244); " th:text="${contributions+' $'}">3900 $</span></div>
				                                        </div>
				                                        <div class="row" style="width: 300px;margin: 0px;">
				                                            <div class="col"><span style="color: rgb(5,125,244);">Solde :</span></div>
				                                            <div class="col" style="padding: 0px;"><span style="text-shadow: 1px 1px 3px  rgb(8,126,244); " th:text="${solde+' $'}">4500 $</span></div>
				                                        </div>
				                                        <div class="row" style="width: 300px;margin: 0px;">
				                                            <div class="col"><span  style="color: rgb(8,126,244); " >Dette actuelle :</span></div>
				                                            <div class="col" style="padding: 0px;"><span style="text-shadow: 1px 1px 3px rgb(8,126,244);" th:text="${detteCourante +' $'}" >3800 $</span></div>
				                                        </div>
				                                        <div class="row" style="width: 300px;margin: 0px;">
				                                            <div class="col"><span style="color: rgb(11,125,238);">Interet :</span></div>
				                                            <div class="col" style="padding: 0px;"><span style="text-shadow: 1px 1px 3px  rgb(8,126,244);" th:text="${interet+' $' }" >120 $</span></div>
				                                        </div>
				                                    </div>
				                                </div>
				                            </div>
				                        </div>
				                    </div>
				                </div>
				            </div>
				            
				            
				            <div class="modal-footer" style="height: 57px;">
				                <button data-dismiss="modal" class="btn btn-primary" type="button" style="margin-top: -3px;width: 101px;border-radius: 5px;">Fermer</button>
				            </div>
				       		 </div>
				                    </div>
				      </div>
               
                            <!--  -->
                 
                        <div   class="modal fade"  id="addModal" role="dialog" tabindex="-1">
    							<div id="modal-id" style="max-width:580px;" class="modal-dialog" role="document">
       								     <div class="modal-content">
           								 <div class="modal-header">
               										 <h4 class="modal-title"> </h4>
               							 </div>
            							<div class="modal-body">                
               
    											<div class="card"   id="card-id" style="height: auto;">
       													 <div class="card-body" id="main-card-body">
            													<div id="div-after-card-body">
               															 <div id="input-div" class="p-5" style="padding: 0px;padding-top: 0px;padding-right: 0px;padding-bottom: 0px;padding-left: 0px;">
                   																 <div class="text-center" id="main-div">
                      																	  <h4 class="text-dark mb-4">Ajouter un nouveau membre</h4>
                   																 </div>
                   																 <form id="main-form" class="user" >
                       																	 <div class="form-group row all-forms">
                            																		<div class="col-auto col-sm-6 d-flex justify-content-end mb-3 mb-sm-0 all-col-left" style="padding-left: 0px;padding-right: 0px;">
                            																		       <input type="text" class="form-control form-control-user-left"  id="matricule" placeholder="Matricule" name="matricule" />
                            																		</div>
                           																			 <div class="col-auto col-sm-6 all-col-right" style="padding-right: 0px;padding-left: 0px;">
                           																					 <input type="text" class="form-control form-control-user-right"  id="mandataire" placeholder="Mandateur" name="mandataire" />
                           																			 </div>
                       																		</div>
                       																		<div class="form-group row all-forms" style="width: 525px;">
                            																			<div class="col-auto col-sm-6 d-flex justify-content-end mb-3 mb-sm-0 all-col-left" style="padding-left: 0px;padding-right: 0px;width: 327px;">
                            																			       <input type="text" class="form-control form-control-user-left" id="capital-field" placeholder="Capital" name="capital" />
                            																			  </div>
                           																				<div class="col-sm-6 all-col all-col-right" style="padding-right: 0px;padding-left: 0px;">
                           																				       <input type="text" class="form-control form-control-user-right" id="fonction-field" placeholder="Fonction" name="fonction" /></div>
                     																					 </div>
                        																	 <div class="form-group row all-forms">
                           																				<div class="col-auto col-sm-6 d-flex justify-content-end mb-3 mb-sm-0 all-col-left" style="padding-right: 0px;padding-left: 0px;">
                           																				        <input type="text" class="form-control form-control-user-left" id="categorie-field" placeholder="Categorie" name="categorie" />
                           																				  </div>
                           																					<div class="col-sm-6 all-col all-col-right" style="padding-right: 0px;padding-left: 0px;">                           																					
                           																					      <!--  <input type="text" class="form-control form-control-user-right" id="contrat-field" placeholder="Type de contrat" name="contrat" /> -->                         																					       
                           																					      <select name="contrat" class="form-control form-control-user-right" id="contrat-field" >
																		                                                
																		                                                <option value="" disabled selected hidden >Type de contrat</option>
																			                                         	<option value="CDD">CDD</option>
																			                                         	<option value="CDI">CDI</option>
																			                                         	
																		                                    
																		                                   		 </select>
                           																					     
                           																					     
                           																					       
                           																					</div>
                      																		  </div>                   																 
                   																   </form> 
	                   																         <div class="text-center" id="div-button">
	                        																	     <div class="form-group d-flex flex-column align-items-center" id="form-btn">
	                        																	           <button  id="addButton" class="btn btn-primary btn-block text-white btn-user btn-save" type="button">Ajouter</button>
	                        																	           <button  id="updateButton" class="btn btn-primary btn-block text-white btn-user  " type="submit">Modifier</button>
	                        																	           <button   class="btn btn-primary btn-block text-white btn-user btn-close" type="button" data-dismiss="modal">Annuler</button>
	                        																	      </div>
	                  																		  </div>               																	      
                																	      
                																       
                															</div>
                																   
                                                                           </div>
                                                                  </div>
                                                          </div>
                                                   </div>
            
                                                   <div  class="modal-footer">
                                                   </div>
                                                   </div>
                                 </div>
                        </div>
                      
    
    <script src="assets/js/jquery.min.js?h=89312d34339dcd686309fe284b3f226f"></script>
    <script src="assets/bootstrap/js/bootstrap.min.js?h=0168f7c1e0d08faa2f4b13f4a1dc8c98"></script>   
    <script src="assets/js/script.min.js?h=9b20e2f15b170d8c8330230170292640"></script>
    
   
    
    <script  th:inline="javascript" > 
    
    
      var idValue=-10;
      var mainList;
                         
                         
                         
                         
function actions(type){
   	
	 $(document).ready(function(){
		 
	 		   var keyWord=$("#keyWord").val()==''?"all":$("#keyWord").val()   		 		
 		       var w=window.open("http://localhost:8080/membre/generatePDF/"+keyWord, "_blank");
	 		
	 		   setTimeout(function(){
	 			   
	 			 //var a = w.document.createElement('A');
				 //var filePath = w.location.href;
				 // a.href = filePath;
				 // a.download = filePath.substr(filePath.lastIndexOf('/') + 1);
				 // w.document.body.appendChild(a);
				  //a.click();
				  //w.document.body.removeChild(a);
	 			   
	 		   },600)
   
	 })
	 
	 
 }                      

                         
                         
   
  function errorFonction() {
         if(typeof errorList !='undefined' && errorList.length>0 && errorList != null ){
            var messages="";
            console.log("===>",errorList);
            errorList.forEach((item,index)=>{messages+=item+"\n"; })
                          		
            alert(messages);
                          		
 	}	
                             
   }                     
                         
    
    function isChecked(x,list)   {
    	idValue=x;   
    	mainList=list;
    	console.log("========"+x);
	 
 }  
    
    function pagination1(page)   {
    
   	 $(document).ready(function(){
   	       
            // Pagination
    	 
       		 $.ajax({
       				 url:"http://localhost:8080/indexSearcher",
       				 type:"post",
       				 data:{
       					 page:page,
       					 keyWord:$("#keyWord").val(),
       					 pagination:$("#keyWord").val()==""? true:false,
       					 size:$("#pageSize").val(),
       				      },
       		 
       		        success: function(data){
       		       	
     		        	    $("#containerMain").html(data);      		        	
                   	        $("#div-total").load(location.href+ " #div-total");	                    	     
                   	        console.log("Tout s'est bien passe");
       		        	
       		                      },        		          
       		          error: function(error){
       		        	  
       		        	     alert("La Pagination n'a pas reussie")
       		        	  
       		                     }
       		        } );
       		 
       	            });  
   	
	 
}   
// Detail du membre

 function detailDuMembre()   {
         
	      console.log( "Detail");
    	 $(document).ready(function(){
             
    		 $.ajax({
				 url:"http://localhost:8080/detailMembre",
				 type:"post",
				 data:{
					 idMember:idValue,
					 size:$("#pageSize").val(),
				      },
		 
		        success: function(data){
		       	
		        	   $("#detailModalContent").html(data);  
		        	   $ ("#detailModal").modal("show");
		        	   console.log("Tout s'est bien passe");
		        	
		          },        		          
		          error: function(error){
		        	  $ ("#detailModal").show();
		        	  alert("Echec lors de la recherche les info sur le membres");
		        	  
		             }
		        } );
    		 
    	 });

}


//Page Size 
 
 function pageSize()	{
 	$(document).ready(function(){
 	       
        
 	     console.log("Call",$("#pageSize").val(),);
 	     
    		 $("#pageSize").on('change',function(){
    			$.ajax({
   				 url:"http://localhost:8080/indexSearcher",
   				 type:"post",
   				 data:{
   					 
   					 pageOpera:0,
   					 keyWord:$("#keyWord").val(),
   					 pagination:$("#keyWord").val()==""? true:false,
   					 size:$("#pageSize").val(),
   				      },
   		 
   		        success: function(data){
   		       	
			   		        $("#containerMain").html(data);
			            	$("#div-total").load(location.href+ " #div-total");
   		        	        console.log("Tout s'est bien passe");
   		        	
   		                      },        		          
   		          error: function(error){
			       		     
   		        	         alert("error de selection")
   		        	  
   		            }
   		   });
    			 
    			 
     })
    		 
});
 	
 }  	
 	   
    
    
    function searcher()   {
    	
    	 $(document).ready(function(){
    	       
             // Search by matricule
             
        	 
        		 $.ajax({
        				 url:"http://localhost:8080/indexSearcher",
        				 type:"post",
        				 data:{
        					 keyWord:$("#keyWord").val(),
        					 size:$("#pageSize").val(),
        					 
        				      },
        		 
        		        success: function(data){
        		       	
        		        	     $("#containerMain").html(data);
 	                    	     $("#div-total").load(location.href+ " #div-total");
        		        	     console.log("Tout s'est bien passe");
        		        	
        		          },        		          
        		        error: function(error){
        		        	  
        		        	  alert("L'operation de  recherche a echouee"+error);
        		        	  
        		          }
        		 } );
        		 
       });  
    	
	 
 }    
    
    	function setVariableDelete(){ 
    	
        $(document).ready(function(){
       
            // Delete Button
            
       	  
       		 
       		 $.ajax({
       				 url:"http://localhost:8080/deteteMember",
       				 type:"post",
       				 data:{
       					 
       					 idMember:idValue,
       					 size:$("#pageSize").val(),
       					 
       				 },
       		 
       		        success: function(data){
       		       	
	     		             $("#containerMain").html(data);        		        	
	                   	     idValue=-10;
	                   	     $("#div-total").load(location.href+ " #div-total");
	       		        	 console.log("Tout s'est bien passe");
       		        	
       		                      },        		          
       		         error: function(error){
       		        	  
       		        	     alert("Echec d'effacement /n Assurez-vous que vous avez le droit d'effectuer cette operation");
       		        	  
       		           }
       		} );
       		 
      });  	             
       	    
       
    	
    	
    	
    }
    
        
          function  setVariableAdd(pages)   {
        	       	idValue=-10;
        	       	
        	       	document.querySelector("#updateButton").style.display="none";
        	       	document.querySelector("#addButton").style.display="block";
        	       	$(document).ready(function(){ 
        	       		
        	          $("#nom-field").val("");
 	    	    	  $("#matricule").val("");
 	    	    	  $("#mandataire").val("");
 	    	    	  $("#capital-field").val("");
 	    	    	  $("#fonction-field").val("");
 	    	    	  $("#categorie-field").val("");
 	    	    	  $("#contrat-field").val(""); 
 	    	    	  console.log("Here is"+ pages.length-1);
 	    	    	
 	    	    	 
        	       	  // Add Button
        	       	console.log("Add Method");
        	       	  
        	       	 $("#addButton").unbind("click").click( function() { 
                    		
        	       		console.log(" Up Ajax Add Method");
                    		 
                    		 $.ajax({
                    				 url:"http://localhost:8080/indexPost",
                    				 type:"post",
                    				 data:{
                    					 nom:       $("#nom-field").val(),
                     	    	    	 matricule: $("#matricule").val(),
                     	    	    	 mandataire: $("#mandataire").val(),
                     	    	    	 capital:   $("#capital-field").val(),
                     	    	    	 fonction:  $("#fonction-field").val(),
                     	    	    	 categorie: $("#categorie-field").val(),
                     	    	    	 contrat:   $("#contrat-field").val(),
                     	    	    	 size:$("#pageSize").val(),
                     	    	    	 page:((pag.length-1) <= 0) ? 0:(pag.length-1),
                    				      },
                    		 
                    		        success: function(data){
                    		        	
                    		        	  $("#containerMain").html(data);       		        	
             	                    	  $("#addModal").modal("hide");
             	                    	  idValue=-10;
             	                    	  $("#div-total").load(location.href+ " #div-total");
             	                    	  console.log("Add Method output");
             	                    	  errorFonction();
                      	    	    	
                    		                      },       
                    		                      
                    		          error: function(error){
                    		        	  
                    		        	  alert("Echec d'ajout d'un nouveau membre /n Assurez-vous que vous avez le droit d'effectuer cette operation");
                    		        	  errorFonction();
                    		                     }
                    		        } );
                    		       
                    		 
		                    		    $(".btn-close").click(function(){
		              		    	    idValue=-10;
		              		    	    $("#nom-field").val('');
		              	    	    	$("#matricule").val('');
		              	    	    	$("#mandataire").val('');
		              	    	    	$("#capital-field").val('');
		              	    	    	$("#fonction-field").val('');
		              	    	    	$("#categorie-field").val('');
		              	    	    	$("#contrat-field").val('');
		              		    	   
              		       })
                    		 
                    		 
                    		
                    		});
        	       		
        	       		
        	       		
        	       	})
        	       	
        	       	
        	       	
     }
         
          function  setVariableUpdate(idValue)   {
        		  
        	        
        	         document.querySelector("#addButton").style.display="none";
        	         document.querySelector("#updateButton").style.display="block"; ;
        	         console.log("Update Method");
        	         $(document).ready(function(){
        	        	 
        	        	//Update Button
         	            
                      	    	var list =mainList;
        	        	       var dateAdhesion;
                      	       list.forEach(function(element){ 
                      	    	   
                      	    	    if(element[0]==idValue){
                      	    	    	
                      	    	    	 
                      	    	    	$("#nom-field").val(element[1]);
                      	    	    	$("#matricule").val(element[2]);
                      	    	    	$("#matricule").prop('disabled',true);
                      	    	    	$("#mandataire").val(element[3]);
                      	    	    	$("#capital-field").val(element[4]);
                      	    	    	$("#fonction-field").val(element[5]);
                      	    	    	$("#categorie-field").val(element[6]);
                      	    	    	$("#contrat-field").val(element[7]).change();
                      	    	    	dateAdhesion=element[8];
                      	    	    	
                      	    	    }
                      	    	
                      	       });
                      	    	   $("#updateButton").click( function(){   
                                  	   console.log("Salut tout le monde in Update");
                          	    	   $.ajax({
                            				 url:"http://localhost:8080/update",
                            				 type:"post",
                            				 data:{
                            					 idMember:  idValue,
                            					 nom:       $("#nom-field").val(),
                           	    	    	     matricule: $("#matricule").val(),
                           	    	    	     mandataire:$("#mandataire").val(),
                           	    	    	     capital:   $("#capital-field").val(),
                           	    	    	     fonction:  $("#fonction-field").val(),
                           	    	    	     categorie: $("#categorie-field").val(),
                           	    	    	     contrat:   $("#contrat-field").val(),
                           	    	    	     date:      dateAdhesion,
                           	    	    	     size:      $("#pageSize").val(),
                            				  },
                            		 
                            		        success: function(data){
                            		       	
                            		        	          $("#containerMain").html(data);      		        	
                 	                    	              $("#addModal").modal("hide");  
                 	                    	              $("#div-total").load(location.href+ " #div-total");
                 	                    	              $("#main-form").load(location.href+ " #main-form");
                                       	    	          idValue=-10;
                                       	    	          $("#nom-field").val('');
                                    	    	    	  $("#matricule").val('');
                                    	    	    	  $("#mandataire").val('');
                                    	    	    	  $("#capital-field").val('');
                                    	    	    	  $("#fonction-field").val('');
                                    	    	    	  $("#categorie-field").val('');
                                    	    	    	  $("#contrat-field").val(''); 
                            		        	          console.log("Tout s'est bien passe dans upda");
                            		        	          errorFonction(); 
                            		                      },        		          
                            		          error: function(error){
                            		        	         errorFonction(); 
                            		        	  		 alert("L'operation Modification a echouee /n Assurez-vous que vous avez le droit d'effectuer cette operation");
                            		        	  
                            		              }
                            		        } )  
                            		        
				                            		       $(".btn-close").click(function(){
			                            		    	   idValue=-10;
			                            		    	   $("#nom-field").val('');
			                            	    	       $("#matricule").val('');
			                            	    	       $("#mandataire").val('');
			                            	    	       $("#capital-field").val('');
			                            	    	       $("#fonction-field").val('');
			                            	    	       $("#categorie-field").val('');
			                            	    	       $("#contrat-field").val('');
                            		    	   
                            		       })
                            		       
                      	    	   
                      	    	   
                      	    	   });   
        	        	 
        	        });
        	        	
          }
    
   
    </script>
     
</body>

</html>